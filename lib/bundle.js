!function(t){var s={};function i(e){if(s[e])return s[e].exports;var h=s[e]={i:e,l:!1,exports:{}};return t[e].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:e})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=0)}([function(t,s,i){"use strict";i.r(s);var e=class{constructor(t,s,i){this.ctx=t,this.x=s,this.y=i}drawPlatform(){this.ctx.beginPath(),this.ctx.fillRect(this.x,this.y,260,32),this.ctx.fillStyle="#3393C6",this.ctx.fill(),this.ctx.closePath(),this.rightEdge=this.x+260}};var h=class extends e{constructor(t,s,i){super(t,s,i)}drawPlatform(){this.ctx.beginPath(),this.ctx.fillRect(this.x,this.y,260,32),this.ctx.fillStyle="pink",this.ctx.fill(),this.ctx.closePath(),this.rightEdge=this.x+260}};var r=class extends e{constructor(t,s,i){super(t,s,i)}drawPlatform(){this.ctx.beginPath(),this.ctx.fillRect(this.x,this.y,260,32),this.ctx.fillStyle="lightseagreen",this.ctx.fill(),this.ctx.closePath(),this.rightEdge=this.x+260}};var a=class extends e{constructor(t,s,i){super(t,s,i),this.type="spiky"}drawPlatform(){super.drawPlatform(),this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.fillRect(0,0,260,32),this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineWidth=2,this.drawSpikes(),this.ctx.closePath(),this.ctx.fillStyle="white",this.ctx.fill(),this.ctx.stroke(),this.ctx.restore()}drawSpikes(){for(let t=0;t<260;)this.ctx.lineTo(t+=10,-30),this.ctx.lineTo(Math.min(t+=10,260),0)}};var n=class extends e{constructor(t,s,i){super(t,s,i)}drawPlatform(){this.ctx.beginPath(),this.ctx.fillRect(this.x,this.y,260,32),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.closePath(),this.rightEdge=this.x+260}};var o=class{constructor(t){this.ctx=t,this.platforms=[],this.ceiling=new Image,this.ceiling.src="./src/ceiling.png",this.platformHit=!1,this.randomx=this.randomX.bind(this),this.drawCeiling=this.drawCeiling.bind(this),this.removeOutOfRange=this.removeOutOfRange.bind(this),this.generatePlatform=this.generatePlatform.bind(this)}populate(){[210,410,810,610,1210].forEach(t=>{this.generatePlatform(t)}),this.ceiling.onload=(()=>{this.drawCeiling()});const t=new e(this.ctx,300,1010);this.platforms.push(t),this.platforms.forEach(t=>{t.drawPlatform()})}drawCeiling(){this.ctx.drawImage(this.ceiling,0,0,880,35,0,0,880,35)}randomX(){return 16*Math.floor(50*Math.random())}randomPlatform(t){const s=this.randomX(),i=[this.ctx,s,t];return[new e(...i),new h(...i),new a(...i),new r(...i),new n(...i)][Math.floor(5*Math.random())]}generatePlatform(t=1280){const s=this.randomPlatform(t);this.platforms.push(s),this.removeOutOfRange()}removeOutOfRange(){const t=this.platforms.length;t>7&&(this.platforms=this.platforms.slice(t-7,t),console.log(this.platforms.map(t=>t.constructor)))}startFeedPlatform(){this.checkHit(),this.platformHit&&(this.platformHit=!1,this.generatePlatform())}checkHit(){this.platforms.forEach(t=>{if(t.y<=30&&t.y>0)return t.y-=40,void(this.platformHit=!0)})}};var c=class{constructor(t){this.ctx=t,this.img=new Image,this.img.src="./src/match.png",this.rightPressed=!1,this.leftPressed=!1,this.dropping=!1,this.hurt=!1,this.sx=4,this.sy=2,this.dx=400,this.dy=903,this.vy=10,this.draw=this.draw.bind(this)}drawMan(){this.ctx.drawImage(this.img,this.sx,this.sy,195,270,this.dx,this.dy,78,108)}draw(){let t;this.drawMan(),this.rightPressed?(t=[1192,1475],this.sx=t[Math.floor(2*Math.random())],this.dx<815&&(this.dx+=9)):this.leftPressed?(t=[596,894],this.sx=t[Math.floor(2*Math.random())],this.dx>=0&&(this.dx-=9)):this.sx=4}go(){this.img.onload=(()=>this.drawMan()),document.addEventListener("keydown",t=>{"ArrowRight"===t.key?this.rightPressed=!0:"ArrowLeft"===t.key&&(this.leftPressed=!0)},!0),document.addEventListener("keyup",t=>{"ArrowRight"===t.key?this.rightPressed=!1:"ArrowLeft"===t.key&&(this.leftPressed=!1)},!0)}drop(){this.dropping?(this.sx=298,this.dy+=this.vy,this.vy+=1):this.vy=10}hurtFn(){this.hurt&&(this.sy=370)}};var l=class{constructor(t){this.ctx=t,this.vy=4,this.player=new c(this.ctx),this.board=new o(this.ctx),this.landedPF=null,this.started=!1,this.pause=!0,this.over=!1,this.hitTop=!1,this.button=new Image,this.pauseFn=this.pauseFn.bind(this),this.init=this.init.bind(this),this.reset=this.reset.bind(this),this.animate=this.animate.bind(this),this.checkX=this.checkX.bind(this),this.checkY=this.checkY.bind(this),this.listenKey()}reset(){this.board.platfroms=new Array,this.ctx.clearRect(0,0,880,1280)}init(){this.board.populate(),this.started||this.over?this.button.src="./src/replay1.png":this.button.src="./src/start2.png",this.button.onload=(()=>{this.ctx.drawImage(this.button,150,460)}),this.player.go()}play(){this.init()}listenKey(){document.addEventListener("keydown",t=>{" "===t.key&&(console.log("here"),this.pause&&(this.over?(this.over=!1,this.pause=!1,this.button.src="./src/replay2.png"):this.button.src=this.started?"./src/continue2.png":"./src/start2.png"))},!1),document.addEventListener("keyup",t=>{" "===t.key&&(this.over?this.pause&&!this.started&&(this.reset(),this.init(),this.over=!1,this.pause=!1,this.started=!0,this.continue()):this.pause&&!this.started?(this.continue(),this.pause=!1,this.started=!0):!this.pause&&this.started?(this.button.src="./src/continue1.png",this.pauseFn(),this.pause=!0):this.pause&&this.started&&(this.continue(),this.pause=!1))},!1)}animate(){this.rollInterval=requestAnimationFrame(this.animate),this.ctx.clearRect(0,0,880,1280),this.board.startFeedPlatform(),this.drawObjects(),this.moveUp(),this.checkHittingTop(),this.checkLanding(),this.player.drop(),this.overFn()&&(this.over=!0,this.pauseFn(),this.started=!1,this.pause=!0,this.button.src="./src/replay1.png")}checkLanding(){this.landedPF?this.checkFall():this.getLandedPF()}drawObjects(){this.board.platforms.forEach(t=>{t.drawPlatform()}),this.board.drawCeiling(),this.player.draw()}moveUp(){this.player.dy-=this.vy,this.board.platforms.forEach(t=>{t.y-=this.vy})}continue(){console.log("continue"),this.animate()}pauseFn(){console.log("pause"),cancelAnimationFrame(this.rollInterval)}getLandedPF(){this.board.platforms.forEach(t=>{this.checkY(t)&&this.checkX(t)&&(this.landedPF=t,this.player.dy=this.landedPF.y-108,this.player.dropping=!1)})}checkX(t){return this.player.dx+20<t.rightEdge&&this.player.dx+57>t.x}checkY(t){return this.player.dy+108>=t.y&&this.player.dy+108<t.y+32}checkFall(){this.checkX(this.landedPF)&&!this.hitTop||(this.landedPF=null,this.player.dropping=!0)}checkHittingTop(){this.player.dy<20?(this.hitTop=!0,this.player.dy+=32):this.hitTop=!1}overFn(){return this.player.dy>1280}};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("myCanvas");t.style.width="440px",t.style.height="640px";const s=t.getContext("2d");new l(s).play()})}]);
//# sourceMappingURL=bundle.js.map